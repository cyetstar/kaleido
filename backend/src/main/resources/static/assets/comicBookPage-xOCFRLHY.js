import{C as F}from"./comicBookForm-kcsqbpvQ.js";import{a as q,c as M,d as O,e as T}from"./image-compressor-mN1qqc4Y.js";import{_ as j,a as p,u as G,E as H,b as s,L as J,o as u,c as Q,f as e,w as n,g as _,l as v,O as d,P as W}from"./index-8V0LDlr9.js";const X={class:"h-page-section",ref:"appManagePage"},Y={__name:"comicBookPage",setup(Z){const l=p({id:"",seriesId:"",title:"",summary:"",bookNumber:"",pageCount:"",path:""}),m=p(),B=()=>{m.value.load(1)},R=()=>{m.value.load(1)},w=(t,o)=>{o(q({...t,...l.value,searchCount:!0}))},D=()=>{},b=p(),E=()=>{b.value.create()},N=G(),S=t=>{N.push({path:"comic/comicBook/view",query:{id:t}})},U=t=>{b.value.update(t)},I=()=>{m.value.load(1)},C=p([]),h=t=>{const o=Array.isArray(t)?t:[t];M(o).then(c=>{c&&(m.value.load(),W.success("删除成功！"))})},{proxy:L}=H(),P=p(),$=t=>{t(O)},z=async t=>{const o=await T({...t,...l.value});L.$dowloadExcel(o,"漫画书籍")};return(t,o)=>{const c=s("h-input"),f=s("h-col"),K=s("h-form-search"),k=s("h-button"),x=s("h-button-delete"),y=s("a-space"),i=s("a-table-column"),V=s("h-table-data"),A=s("h-modal-export"),r=J("permissKey");return u(),Q("section",X,[e(K,{form:l.value,"onUpdate:form":o[4]||(o[4]=a=>l.value=a),onSearch:B,onReset:R},{default:n(()=>[e(f,{span:6},{default:n(()=>[e(c,{label:"系列id",value:l.value.seriesId,"onUpdate:value":o[0]||(o[0]=a=>l.value.seriesId=a),name:"seriesId"},null,8,["value"])]),_:1}),e(f,{span:6},{default:n(()=>[e(c,{label:"标题",value:l.value.title,"onUpdate:value":o[1]||(o[1]=a=>l.value.title=a),name:"title"},null,8,["value"])]),_:1}),e(f,{span:6},{default:n(()=>[e(c,{label:"简介",value:l.value.summary,"onUpdate:value":o[2]||(o[2]=a=>l.value.summary=a),name:"summary"},null,8,["value"])]),_:1}),e(f,{span:6},{default:n(()=>[e(c,{label:"卷号",value:l.value.bookNumber,"onUpdate:value":o[3]||(o[3]=a=>l.value.bookNumber=a),name:"bookNumber"},null,8,["value"])]),_:1})]),_:1},8,["form"]),e(y,{class:"h-btn-space"},{default:n(()=>[d((u(),v(k,{type:"primary",onClick:E},{default:n(()=>[_("新增")]),_:1})),[[r,"comicBook:create"]]),d(e(x,{plain:"",disabled:C.value.length===0,onDelete:o[5]||(o[5]=a=>h(C.value))},null,8,["disabled"]),[[r,"comicBook:delete"]]),d((u(),v(k,{onClick:t.onShowExportRecord},{default:n(()=>[_("导出")]),_:1},8,["onClick"])),[[r,"comicBook:export"]])]),_:1}),e(V,{ref_key:"tableRef",ref:m,"row-key":"id",onLoadData:w,onSelectionChange:D},{default:n(()=>[e(i,{title:"主键","data-index":"id",align:"center"}),e(i,{title:"系列id","data-index":"seriesId",align:"center"}),e(i,{title:"标题","data-index":"title",align:"center"}),e(i,{title:"简介","data-index":"summary",align:"center"}),e(i,{title:"卷号","data-index":"bookNumber",align:"center"}),e(i,{title:"页数","data-index":"pageCount",align:"center"}),e(i,{title:"路径","data-index":"path",align:"center"}),e(i,{title:"操作",align:"center",width:"300px"},{default:n(({record:a})=>[e(y,{size:0},{default:n(()=>[d((u(),v(k,{type:"primary",size:"small",link:"",onClick:g=>S(a.id)},{default:n(()=>[_("详情")]),_:2},1032,["onClick"])),[[r,"comicBook:view"]]),d((u(),v(k,{type:"primary",size:"small",link:"",onClick:g=>U(a.id)},{default:n(()=>[_("编辑")]),_:2},1032,["onClick"])),[[r,"comicBook:update"]]),d((u(),v(x,{size:"small",link:"",onDelete:g=>h(a.id)},{default:n(()=>[_("删除")]),_:2},1032,["onDelete"])),[[r,"comicBook:delete"]])]),_:2},1024)]),_:1})]),_:1},512),e(F,{ref_key:"formRef",ref:b,onSaveComplete:I},null,512),e(A,{ref_key:"exportRef",ref:P,onLoadColumn:$,onExport:z},null,512)],512)}}},ae=j(Y,[["__scopeId","data-v-c3863b13"]]);export{ae as default};
