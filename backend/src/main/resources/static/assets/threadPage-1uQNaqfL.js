import{L as V,a as L,b as N}from"./threadApi-e74Sbdoe.js";import{_ as T,a as d,u as A,E as B,b as o,o as v,c as b,f as t,w as n,t as f,g as p,k as E,z as $,P as q}from"./index-8V0LDlr9.js";const F={class:"h-page-section"},M=["href"],O={__name:"threadPage",setup(W){const h=d({like:"green",unlike:"red",achieve:"blue"}),l=d({}),i=d(),g=()=>{i.value.load(1)},k=()=>{i.value.load(1)},y=(s,a)=>{a(L({...s,...l.value}))},I=()=>{};d();const w=A(),C=s=>{w.push({path:"/thread/view",query:{id:s}})};d([]);const D=s=>{const a=Array.isArray(s)?s:[s];N(a).then(r=>{r&&(i.value.load(),q.success("删除成功！"))})};return B(),d(),(s,a)=>{const r=o("h-select"),u=o("h-col"),_=o("h-input"),R=o("h-form-search"),c=o("a-space"),U=o("a-tag"),m=o("a-table-column"),x=o("h-button"),S=o("h-button-delete"),z=o("h-table-data");return v(),b("section",F,[t(R,{form:l.value,"onUpdate:form":a[6]||(a[6]=e=>l.value=e),onSearch:g,onReset:k,class:"h-form"},{default:n(()=>[t(u,{span:6},{default:n(()=>[t(r,{label:"站点",value:l.value.website,"onUpdate:value":a[0]||(a[0]=e=>l.value.website=e),"dict-type":"threadWebsite",name:"website"},null,8,["value"])]),_:1}),t(u,{span:6},{default:n(()=>[t(_,{label:"标题",value:l.value.title,"onUpdate:value":a[1]||(a[1]=e=>l.value.title=e),name:"title"},null,8,["value"])]),_:1}),t(u,{span:6},{default:n(()=>[t(_,{label:"豆瓣编号",value:l.value.doubanId,"onUpdate:value":a[2]||(a[2]=e=>l.value.doubanId=e),name:"doubanId"},null,8,["value"])]),_:1}),t(u,{span:6},{default:n(()=>[t(_,{label:"IMDb编号",value:l.value.imdbId,"onUpdate:value":a[3]||(a[3]=e=>l.value.imdbId=e),name:"imdbId"},null,8,["value"])]),_:1}),t(u,{span:6},{default:n(()=>[t(_,{label:"番组计划编号",value:l.value.bgmId,"onUpdate:value":a[4]||(a[4]=e=>l.value.bgmId=e),name:"bgmId"},null,8,["value"])]),_:1}),t(u,{span:6},{default:n(()=>[t(r,{label:"状态",value:l.value.status,"onUpdate:value":a[5]||(a[5]=e=>l.value.status=e),"dict-type":"threadStatus",name:"status"},null,8,["value"])]),_:1})]),_:1},8,["form"]),t(c,{class:"h-btn-space"}),t(z,{ref_key:"tableRef",ref:i,"row-key":"id",onLoadData:y,onSelectionChange:I},{default:n(()=>[t(m,{title:"标题"},{default:n(({record:e})=>[t(U,{color:h.value[e.status]},{default:n(()=>[p(f(e.status),1)]),_:2},1032,["color"]),p(" "+f(e.title)+" ",1),e.url?(v(),b("a",{key:0,href:e.url,target:"_blank"},[t(E(V))],8,M)):$("",!0)]),_:1}),t(m,{title:"操作",align:"center",width:"80px"},{default:n(({record:e})=>[t(c,{size:0},{default:n(()=>[t(x,{type:"primary",size:"small",link:"",onClick:P=>C(e.id)},{default:n(()=>[p("详情 ")]),_:2},1032,["onClick"]),t(S,{size:"small",link:"",onDelete:P=>D(e.id)},{default:n(()=>[p("删除 ")]),_:2},1032,["onDelete"])]),_:2},1024)]),_:1})]),_:1},512)])}}},H=T(O,[["__scopeId","data-v-e569988d"]]);export{H as default};
