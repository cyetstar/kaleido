import{J as I,v as S,a as U,y as _,a7 as z,b as p,o as F,c as N,f as e,w as n,k as o,N as g,t as x,g as r,a0 as O,a8 as K,P as A}from"./index-8V0LDlr9.js";const k=()=>I.post({url:"/plex/listLibrary"}),P=()=>I.post({url:"/komga/listLibrary"}),E={class:"h-page-section",ref:"appManagePage"},$={__name:"sysConfigForm",setup(R){let c=S(),L=U(),v=U([]),t=U({movieLibraryPath:"",tvshowLibraryPath:"",musicLibraryPath:"",comicLibraryPath:"",plexUrl:"",plexToken:"",komgaUrl:"",komgaUsername:"",komgaPassword:"",tmmUrl:"",plexMovieLibraryId:"",plexMovieLibraryPath:"",plexTvshowLibraryId:"",plexTvshowLibraryPath:"",plexMusicLibraryId:"",plexMusicLibraryPath:"",komgaComicLibraryId:"",komgaComicLibraryPath:"",plexRetries:"",matchInfoSleepSecond:"",downloadLyricSleepSecond:"",lastMovieAnalyzeTime:"",lastMovieMatchInfo:"",lastTvshowMatchInfo:"",lastMusicMatchInfo:"",lastComicMatchInfo:"",writeComicInfo:"",writeMovieNFO:"",writeAudioTag:"",writeTvshowNFO:"",refreshMetadata:"",syncMovie:"",syncTvshow:"",syncMusic:"",syncComic:"",checkThreadStatus:"",checkMovieStatus:"",analyzeMovie:"",videoExtension:"",comicZipExtension:"",audioExtension:""});_(()=>{h()});const h=()=>{z(Object.keys(t.value)).then(m=>{t.value=m,v.value=[],Promise.all([k(),P()]).then(([a,s])=>{a.forEach(u=>{v.value.push({text:u.name,value:u.key,...u})}),s.forEach(u=>{v.value.push({text:u.name,value:u.key,...u})})})})},w=(m,a)=>{a==="movie"?t.value.plexMovieLibraryPath=m.path:a==="tvshow"?t.value.plexTvshowLibraryPath=m.path:a==="music"?t.value.plexMusicLibraryPath=m.path:a==="comic"&&(t.value.komgaComicLibraryPath=m.path)},d=(m,a)=>{let s=t.value;m&&a&&(s={[m]:a}),K(s).then(u=>{u&&(Promise.all([k(),P()]).then(([f,M])=>{v.value=[],f.forEach(i=>{v.value.push({text:i.name,value:i.key,...i})}),M.forEach(i=>{v.value.push({text:i.name,value:i.key,...i})})}),c.initAppConfig(),A.success("操作成功"))})};return(m,a)=>{const s=p("h-input"),u=p("h-col"),f=p("h-select"),M=p("a-tab-pane"),i=p("h-radio"),b=p("h-button"),y=p("a-form-item"),C=p("a-tabs"),T=p("a-form");return F(),N("section",E,[e(T,{ref:"refForm","label-col":{span:9},form:o(t),"onUpdate:form":a[36]||(a[36]=l=>g(t)?t.value=l:t=l)},{default:n(()=>[e(C,{activeKey:o(L),"onUpdate:activeKey":a[35]||(a[35]=l=>g(L)?L.value=l:L=l)},{default:n(()=>[e(M,{key:"third",tab:"第三方"},{default:n(()=>[e(u,{span:12},{default:n(()=>[e(s,{label:"Plex访问地址",name:"plexUrl",value:o(t).plexUrl,"onUpdate:value":a[0]||(a[0]=l=>o(t).plexUrl=l)},null,8,["value"])]),_:1}),e(u,{span:12},{default:n(()=>[e(s,{label:"Plex Token",name:"plexToken",value:o(t).plexToken,"onUpdate:value":a[1]||(a[1]=l=>o(t).plexToken=l)},null,8,["value"])]),_:1}),e(u,{span:12},{default:n(()=>[e(s,{label:"Komga地址",name:"komgaUrl",value:o(t).komgaUrl,"onUpdate:value":a[2]||(a[2]=l=>o(t).komgaUrl=l)},null,8,["value"])]),_:1}),e(u,{span:12},{default:n(()=>[e(s,{label:"Komga账号",name:"komgaUsername",value:o(t).komgaUsername,"onUpdate:value":a[3]||(a[3]=l=>o(t).komgaUsername=l)},null,8,["value"])]),_:1}),e(u,{span:12},{default:n(()=>[e(s,{label:"Komga密码",name:"komgaPassword",value:o(t).komgaPassword,"onUpdate:value":a[4]||(a[4]=l=>o(t).komgaPassword=l)},null,8,["value"])]),_:1}),e(u,{span:12},{default:n(()=>[e(s,{label:"TMM地址",name:"tmmUrl",value:o(t).tmmUrl,"onUpdate:value":a[5]||(a[5]=l=>o(t).tmmUrl=l)},null,8,["value"])]),_:1}),e(u,{span:12},{default:n(()=>[e(f,{label:"Plex电影资料库",columns:o(v),name:"plexMovieLibraryId",onChange:a[6]||(a[6]=l=>w(l,"movie")),value:o(t).plexMovieLibraryId,"onUpdate:value":a[7]||(a[7]=l=>o(t).plexMovieLibraryId=l)},null,8,["columns","value"])]),_:1}),e(u,{span:12},{default:n(()=>[e(f,{label:"Plex剧集资料库",columns:o(v),name:"plexTvshowLibraryId",onChange:a[8]||(a[8]=l=>w(l,"tvshow")),value:o(t).plexTvshowLibraryId,"onUpdate:value":a[9]||(a[9]=l=>o(t).plexTvshowLibraryId=l)},null,8,["columns","value"])]),_:1}),e(u,{span:12},{default:n(()=>[e(f,{label:"Plex音乐资料库",columns:o(v),name:"plexMusicLibraryId",onChange:a[10]||(a[10]=l=>w(l,"music")),value:o(t).plexMusicLibraryId,"onUpdate:value":a[11]||(a[11]=l=>o(t).plexMusicLibraryId=l)},null,8,["columns","value"])]),_:1}),e(u,{span:12},{default:n(()=>[e(f,{label:"Komga漫画资料库",columns:o(v),name:"komgaComicLibraryId",onChange:a[12]||(a[12]=l=>w(l,"comic")),value:o(t).komgaComicLibraryId,"onUpdate:value":a[13]||(a[13]=l=>o(t).komgaComicLibraryId=l)},null,8,["columns","value"])]),_:1})]),_:1}),e(M,{key:"dir",tab:"目录"},{default:n(()=>[e(u,{span:12},{default:n(()=>[e(s,{label:"电影资料库目录",name:"movieLibraryPath",value:o(t).movieLibraryPath,"onUpdate:value":a[14]||(a[14]=l=>o(t).movieLibraryPath=l)},null,8,["value"])]),_:1}),e(u,{span:12},{default:n(()=>[e(s,{label:"剧集资料库目录",name:"tvshowLibraryPath",value:o(t).tvshowLibraryPath,"onUpdate:value":a[15]||(a[15]=l=>o(t).tvshowLibraryPath=l)},null,8,["value"])]),_:1}),e(u,{span:12},{default:n(()=>[e(s,{label:"音乐资料库目录",name:"musicLibraryPath",value:o(t).musicLibraryPath,"onUpdate:value":a[16]||(a[16]=l=>o(t).musicLibraryPath=l)},null,8,["value"])]),_:1}),e(u,{span:12},{default:n(()=>[e(s,{label:"漫画资料库目录",name:"comicLibraryPath",value:o(t).comicLibraryPath,"onUpdate:value":a[17]||(a[17]=l=>o(t).comicLibraryPath=l)},null,8,["value"])]),_:1})]),_:1}),e(M,{key:"other",tab:"其他"},{default:n(()=>[e(u,{span:12},{default:n(()=>[e(s,{label:"Plex重试次数",name:"plexRetries",value:o(t).plexRetries,"onUpdate:value":a[18]||(a[18]=l=>o(t).plexRetries=l)},null,8,["value"])]),_:1}),e(u,{span:12},{default:n(()=>[e(s,{label:"单次抓取信息延时（秒）",name:"matchInfoSleepSecond",value:o(t).matchInfoSleepSecond,"onUpdate:value":a[19]||(a[19]=l=>o(t).matchInfoSleepSecond=l)},null,8,["value"])]),_:1}),e(u,{span:12},{default:n(()=>[e(s,{label:"单次下载歌词延时（秒）",name:"downloadLyricSleepSecond",value:o(t).downloadLyricSleepSecond,"onUpdate:value":a[20]||(a[20]=l=>o(t).downloadLyricSleepSecond=l)},null,8,["value"])]),_:1}),e(u,{span:12},{default:n(()=>[e(i,{label:"是否定时同步电影",name:"syncMovie",value:o(t).syncMovie,"onUpdate:value":a[21]||(a[21]=l=>o(t).syncMovie=l),"dict-type":"sfbz"},null,8,["value"])]),_:1}),e(u,{span:12},{default:n(()=>[e(i,{label:"是否定时同步剧集",name:"syncTvshow",value:o(t).syncTvshow,"onUpdate:value":a[22]||(a[22]=l=>o(t).syncTvshow=l),"dict-type":"sfbz"},null,8,["value"])]),_:1}),e(u,{span:12},{default:n(()=>[e(i,{label:"是否定时同步音乐",name:"syncMusic",value:o(t).syncMusic,"onUpdate:value":a[23]||(a[23]=l=>o(t).syncMusic=l),"dict-type":"sfbz"},null,8,["value"])]),_:1}),e(u,{span:12},{default:n(()=>[e(i,{label:"是否定时同步漫画",name:"syncMusic",value:o(t).syncComic,"onUpdate:value":a[24]||(a[24]=l=>o(t).syncComic=l),"dict-type":"sfbz"},null,8,["value"])]),_:1}),e(u,{span:12},{default:n(()=>[e(i,{label:"是否自动刷新Plex",name:"refreshMetadata",value:o(t).refreshMetadata,"onUpdate:value":a[25]||(a[25]=l=>o(t).refreshMetadata=l),"dict-type":"sfbz"},null,8,["value"])]),_:1}),e(u,{span:12},{default:n(()=>[e(i,{label:"是否重写电影NFO文件",name:"writeMovieNFO",value:o(t).writeMovieNFO,"onUpdate:value":a[26]||(a[26]=l=>o(t).writeMovieNFO=l),"dict-type":"sfbz"},null,8,["value"])]),_:1}),e(u,{span:12},{default:n(()=>[e(i,{label:"是否重写剧集NFO文件",name:"writeTvshowNFO",value:o(t).writeTvshowNFO,"onUpdate:value":a[27]||(a[27]=l=>o(t).writeTvshowNFO=l),"dict-type":"sfbz"},null,8,["value"])]),_:1}),e(u,{span:12},{default:n(()=>[e(i,{label:"是否重写音频文件标签",name:"writeAudioTag",value:o(t).writeAudioTag,"onUpdate:value":a[28]||(a[28]=l=>o(t).writeAudioTag=l),"dict-type":"sfbz"},null,8,["value"])]),_:1}),e(u,{span:12},{default:n(()=>[e(i,{label:"是否重写ComicInfo文件",name:"writeComicInfo",value:o(t).writeComicInfo,"onUpdate:value":a[29]||(a[29]=l=>o(t).writeComicInfo=l),"dict-type":"sfbz"},null,8,["value"])]),_:1}),e(u,{span:12},{default:n(()=>[e(y,{label:"重置电影分析进程"},{default:n(()=>[r(x(o(t).lastMovieAnalyzeTime)+" ",1),e(b,{small:"",onClick:a[30]||(a[30]=l=>d("lastMovieAnalyzeTime","0"))},{default:n(()=>[r("重置 ")]),_:1})]),_:1})]),_:1}),e(u,{span:12},{default:n(()=>[e(y,{label:"重置电影抓取进程"},{default:n(()=>[r(x(o(t).lastMovieMatchInfo)+" ",1),e(b,{small:"",onClick:a[31]||(a[31]=l=>d("lastMovieMatchInfo","0"))},{default:n(()=>[r("重置 ")]),_:1})]),_:1})]),_:1}),e(u,{span:12},{default:n(()=>[e(y,{label:"重置剧集抓取进程"},{default:n(()=>[r(x(o(t).lastTvshowMatchInfo)+" ",1),e(b,{small:"",onClick:a[32]||(a[32]=l=>d("lastTvshowMatchInfo","0"))},{default:n(()=>[r("重置 ")]),_:1})]),_:1})]),_:1}),e(u,{span:12},{default:n(()=>[e(y,{label:"重置音乐抓取进程"},{default:n(()=>[r(x(o(t).lastMusicMatchInfo)+" ",1),e(b,{small:"",onClick:a[33]||(a[33]=l=>d("lastMusicMatchInfo","0"))},{default:n(()=>[r("重置 ")]),_:1})]),_:1})]),_:1}),e(u,{span:12},{default:n(()=>[e(y,{label:"重置漫画抓取进程"},{default:n(()=>[r(x(o(t).lastComicMatchInfo)+" ",1),e(b,{small:"",onClick:a[34]||(a[34]=l=>d("lastComicMatchInfo","0"))},{default:n(()=>[r("重置 ")]),_:1})]),_:1})]),_:1}),e(u,{span:12},{default:n(()=>[e(y,{label:"优化数据库"},{default:n(()=>[e(O,{action:"tableOptimize","ok-text":"执行","cancel-text":"取消"})]),_:1})]),_:1})]),_:1})]),_:1},8,["activeKey"]),e(u,{span:12,offset:3,class:"mt-3"},{default:n(()=>[e(b,{type:"primary",onClick:d},{default:n(()=>[r("保存")]),_:1})]),_:1})]),_:1},8,["form"])],512)}}};export{$ as default};
