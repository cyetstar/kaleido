import{d as X,E as Y,a as _,b as i,L as j,o as c,c as G,f as e,w as s,k as n,N as J,g as f,l as g,O as h,t as Z,Q as ee,S as ae,P as w,T as te,U as se,V as ne,W as oe,X as le,Y as ie,_ as me}from"./index-8V0LDlr9.js";import{i as pe}from"./dict-NdCH1Osc.js";const de=[{title:"电影",name:"movie",children:[{title:"电影",name:"movieBasicPage",path:"/movie/movieBasic/page",permission:"movieBasic:page"},{title:"电影合集",name:"movieCollectionPage",path:"/movie/movieCollection/page",permission:"movieCollection:page"},{title:"豆瓣口碑榜",name:"movieDoubanWeeklyPage",path:"/movie/movieDoubanWeekly/page",permission:"movieDoubanWeekly:page"}]},{title:"剧集",name:"tvshow",children:[{title:"剧集",name:"tvshowShowPage",path:"/tvshow/tvshowShow/page",permission:"tvshowShow:page"}]},{title:"音乐",name:"music",children:[{title:"专辑",name:"musicAlbumPage",path:"/music/musicAlbum/page",permission:"musicAlbum:page"},{title:"艺术家",name:"musicArtistPage",path:"/music/musicArtist/page",permission:"musicArtist:page"}]},{title:"漫画",name:"comic",children:[{title:"漫画系列",name:"comicSeriesPage",path:"/comic/comicSeries/page",permission:"comicSeries:page"},{title:"作者",name:"authorPage",path:"/author/page",permission:"author:page"}]},{title:"系统管理",name:"sysadmin",children:[{title:"发布记录",name:"ThreadPage",path:"/thread/page",permission:"thread:page"},{title:"用户管理",name:"SysUserPage",path:"/sysadmin/sysUser/page",permission:"sysUser:page"},{title:"角色管理",name:"SysRolePage",path:"/sysadmin/sysRole/page",permission:"sysRole:page"},{title:"菜单管理",name:"SysMenuPage",path:"/sysadmin/sysMenu/page",permission:"sysMenu:page"},{title:"资源管理",name:"SysResourcePage",path:"/sysadmin/sysResource/page",permission:"sysResource:page"},{title:"字典管理",name:"sysDictTypePage",path:"/sysadmin/sysDictType/page",permission:"sysDictType:page"},{title:"系统配置",name:"SysConfigForm",path:"/sysadmin/sysConfig/form",permission:"sysConfig:create"},{title:"系统日志",name:"SysLogPage",path:"/sysadmin/sysLog/page",permission:"sysLog:page"}]}],ue={class:"h-page-section"},re=X({__name:"sysMenuPage",setup(ce){const{proxy:D}=Y();let m=_({app:"",name:"",title:"",isHidden:""}),b=_([]);const d=_(),R=(l,a)=>{a(ee({...l,...m.value})),b.value=[]},A=()=>{d.value.load(1)},H=()=>{d.value.load(1)},N=l=>{b.value=l},L=async()=>{await ae(de)&&(w.success("初始化成功!"),d.value.load(1))},k=_(),E=()=>{k.value.show()},B=l=>{l(te)},T=async l=>{const a=await se({...l,...m.value});D.$dowloadExcel(a,"系统目录")};let o=_({visible:!1,type:"0",form:{}});const I=async l=>{const a=await ne(l),{orderNum:p}=a;o.value.form={...a,orderNum:p+""},o.value.type="1",o.value.visible=!0},z=()=>{o.value.visible=!1,o.value.form={}},V=async()=>{await oe(o.value.form)&&(w.success("更新成功!"),o.value.visible=!1,d.value.load(1))},M=async l=>{le(typeof l=="string"?[l]:l).then(p=>{p&&(d.value.load(),w.success("操作成功！"))})},W=(l,a)=>{ie({id:a,hidden:l}).then(p=>{p&&(w.success("操作成功"),d.value.load())})};return(l,a)=>{const p=i("h-input"),u=i("a-col"),x=i("h-select"),q=i("h-form-search"),C=i("h-button"),U=i("h-button-delete"),P=i("a-space"),r=i("a-table-column"),F=i("a-switch"),K=i("h-table-data"),$=i("h-modal-export"),S=i("a-row"),O=i("a-form"),Q=i("a-modal"),y=j("permissKey");return c(),G("section",ue,[e(q,{form:n(m),"onUpdate:form":a[3]||(a[3]=t=>J(m)?m.value=t:m=t),onSearch:A,onReset:H,class:"h-form"},{default:s(()=>[e(u,{span:5},{default:s(()=>[e(p,{value:n(m).name,"onUpdate:value":a[0]||(a[0]=t=>n(m).name=t),label:"菜单标识",name:"name"},null,8,["value"])]),_:1}),e(u,{span:5},{default:s(()=>[e(p,{value:n(m).title,"onUpdate:value":a[1]||(a[1]=t=>n(m).title=t),label:"菜单标题",name:"title"},null,8,["value"])]),_:1}),e(u,{span:5},{default:s(()=>[e(x,{label:"是否隐藏",name:"isHidden",value:n(m).isHidden,"onUpdate:value":a[2]||(a[2]=t=>n(m).isHidden=t),"dict-type":"sfbz"},null,8,["value"])]),_:1})]),_:1},8,["form"]),e(P,{class:"py-12px"},{default:s(()=>[h((c(),g(C,{type:"primary",onClick:L},{default:s(()=>[f("初始化 ")]),_:1})),[[y,"sysMenu:other"]]),h((c(),g(U,{type:"danger",plain:"",disabled:n(b).length===0,onDelete:a[4]||(a[4]=t=>M(n(b)))},{default:s(()=>[f("删除 ")]),_:1},8,["disabled"])),[[y,"sysUser:delete"]]),h((c(),g(C,{onClick:E},{default:s(()=>[f("导出 ")]),_:1})),[[y,"sysMenu:export"]])]),_:1}),e(K,{ref_key:"tableRef",ref:d,"row-key":"id",onLoadData:R,onSelectionChange:N},{default:s(()=>[e(r,{title:"父菜单",key:"parentIdLabel"},{default:s(({record:t})=>[f(Z(t.parentId==="0"?"-":t.parentIdLabel),1)]),_:1}),e(r,{title:"菜单标题","data-index":"title"}),e(r,{title:"菜单标识","data-index":"name"}),e(r,{title:"菜单路径","data-index":"path"}),e(r,{title:"顺序号","data-index":"orderNum"}),e(r,{title:"是否隐藏","data-index":"isHidden"},{default:s(({record:t})=>[e(F,{checked:t.isHidden,"onUpdate:checked":v=>t.isHidden=v,onChange:v=>W(v,t.id)},null,8,["checked","onUpdate:checked","onChange"])]),_:1}),e(r,{title:"操作",key:"action"},{default:s(({record:t})=>[e(P,{size:0},{default:s(()=>[h((c(),g(C,{link:"",size:"small",type:"primary",onClick:v=>I(t.id)},{default:s(()=>[f("编辑 ")]),_:2},1032,["onClick"])),[[y,"sysMenu:update"]]),h((c(),g(U,{link:"",size:"small",onDelete:v=>M(t.id)},{default:s(()=>[f(" 删除 ")]),_:2},1032,["onDelete"])),[[y,"sysMenu:delete"]])]),_:2},1024)]),_:1})]),_:1},512),e($,{ref_key:"exportRef",ref:k,onLoadColumn:B,onExport:T},null,512),e(Q,{visible:n(o).visible,"onUpdate:visible":a[9]||(a[9]=t=>n(o).visible=t),title:"编辑菜单",width:"800px",onCancel:z,onOk:V},{default:s(()=>[e(O,{model:n(o).form,"label-col":{span:8},ref:"menuFormRef"},{default:s(()=>[e(S,null,{default:s(()=>[e(u,{span:12},{default:s(()=>[e(p,{disabled:n(o).type==="1",required:"",label:"菜单标识",name:"name",value:n(o).form.name,"onUpdate:value":a[5]||(a[5]=t=>n(o).form.name=t)},null,8,["disabled","value"])]),_:1}),e(u,{span:12},{default:s(()=>[e(p,{required:"",label:"菜单标题",name:"title",value:n(o).form.title,"onUpdate:value":a[6]||(a[6]=t=>n(o).form.title=t)},null,8,["value"])]),_:1})]),_:1}),e(S,null,{default:s(()=>[e(u,{span:12},{default:s(()=>[e(p,{required:"",label:"顺序号",name:"orderNum",value:n(o).form.orderNum,"onUpdate:value":a[7]||(a[7]=t=>n(o).form.orderNum=t)},null,8,["value"])]),_:1}),e(u,{span:12},{default:s(()=>[e(x,{label:"是否隐藏",name:"isHidden",value:n(o).form.isHidden,"onUpdate:value":a[8]||(a[8]=t=>n(o).form.isHidden=t),columns:n(pe)},null,8,["value","columns"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["visible"])])}}}),ve=me(re,[["__scopeId","data-v-1548f1f4"]]);export{ve as default};
