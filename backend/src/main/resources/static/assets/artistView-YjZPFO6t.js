import{f as e,m as D,A as U,a as v,b as n,o as w,l as z,w as a,k as h,a5 as q,g as A,z as E,N as F,P as $,G as H,u as G,y as R,c as P,e as p,a4 as J,t as V,F as L,n as K}from"./index-8V0LDlr9.js";import{b as Q,c as W,d as X,e as Y}from"./musicArtistApi-OTdSNFol.js";import{m as Z}from"./musicAlbumApi-CiX1Qw26.js";var ee={icon:function(s,o){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z",fill:s}},{tag:"path",attrs:{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm193.4 225.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.3 0 19.9 5 25.9 13.3l71.2 98.8 157.2-218c6-8.4 15.7-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.4 12.7z",fill:o}},{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z",fill:s}}]}},name:"check-circle",theme:"twotone"};const te=ee;function ae(r){for(var s=1;s<arguments.length;s++){var o=arguments[s]!=null?Object(arguments[s]):{},i=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(o).filter(function(t){return Object.getOwnPropertyDescriptor(o,t).enumerable}))),i.forEach(function(t){ne(r,t,o[t])})}return r}function ne(r,s,o){return s in r?Object.defineProperty(r,s,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[s]=o,r}var B=function(s,o){var i=ae({},s,o.attrs);return e(U,D(i,{icon:te}),null)};B.displayName="CheckCircleTwoTone";B.inheritAttrs=!1;const se=B,le={__name:"artistSearchNetease",emits:["match-success"],setup(r,{expose:s,emit:o}){const i=o;let t=v({}),d=v(),y=v([]),g=v({keywords:""});const M=u=>{d.value=!0,t.value=u,g.value.keywords=u.title,b()},b=()=>{Q(g.value).then(u=>{y.value=u})},T=u=>{W({...t.value,...u}).then(()=>{$.success("匹配成功"),d.value=!1,i("match-success",u)})};return s({show:M}),(u,l)=>{const x=n("h-input"),k=n("h-button"),I=n("a-form"),_=n("a-table-column"),C=n("a-image"),S=n("a-space"),m=n("a-table"),N=n("a-modal");return w(),z(N,{ref:"formRef",visible:h(d),"onUpdate:visible":l[2]||(l[2]=c=>F(d)?d.value=c:d=c),title:"匹配网易云",width:"800px",footer:null},{default:a(()=>[e(I,{layout:"inline"},{default:a(()=>[e(x,{class:"w-300px",placeholder:"",value:h(g).keywords,"onUpdate:value":l[0]||(l[0]=c=>h(g).keywords=c),name:"keywords",onBlur:b,onKeyup:l[1]||(l[1]=q(c=>c.target.blur(),["enter","native"]))},null,8,["value"]),e(k,{onClick:b},{default:a(()=>[A("搜索")]),_:1})]),_:1}),e(m,{size:"small","data-source":h(y),class:"mt-3"},{default:a(()=>[e(_,{align:"center"},{default:a(({record:c})=>[c.neteaseId===h(t).neteaseId?(w(),z(h(se),{key:0,"two-tone-color":"#52c41a"})):E("",!0)]),_:1}),e(_,{title:"照片",align:"center"},{default:a(({record:c})=>[e(C,{src:c.picUrl,width:100},null,8,["src"])]),_:1}),e(_,{title:"名称","data-index":"name",align:"center"}),e(_,{title:"中文名","data-index":"trans",align:"center"}),e(_,{title:"操作",align:"center"},{default:a(({record:c})=>[e(S,{size:0},{default:a(()=>[e(k,{type:"primary",size:"small",link:"",onClick:O=>T(c)},{default:a(()=>[A("匹配 ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data-source"])]),_:1},8,["visible"])}}},oe={class:"k-view-section"},ce={class:"grid grid-cols-24 gap-x-4 gap-y-4"},re={class:"absolute top-0 left-0 m-2px"},_e={__name:"artistView",setup(r){const s=H(),o=G(),i=s.query.id,t=v({}),d=v([]),y=v(),g=()=>{X({id:i}).then(l=>t.value=l),Z({artistId:i}).then(l=>d.value=l)},M=l=>{o.push({path:"/music/musicAlbum/view",query:{id:l}})},b=()=>{Y({id:i}).then(()=>{$.success("同步成功")})},T=()=>{y.value.show(t.value)},u=({neteaseId:l})=>{t.value.neteaseId=l};return R(()=>{g()}),(l,x)=>{const k=n("h-button"),I=n("a-space"),_=n("a-page-header"),C=n("k-plex-image"),S=n("h-col"),m=n("k-logo-link"),N=n("a-row"),c=n("h-module-title"),O=n("a-card-meta"),j=n("a-card");return w(),P(L,null,[p("section",oe,[e(_,{title:t.value.title,onBack:x[0]||(x[0]=()=>l.$router.go(-1))},{backIcon:a(()=>[e(h(J))]),extra:a(()=>[e(I,null,{default:a(()=>[e(k,{onClick:b},{default:a(()=>[A("同步Plex")]),_:1}),e(k,{onClick:T},{default:a(()=>[A("匹配网易云")]),_:1})]),_:1})]),_:1},8,["title"]),p("section",null,[e(N,null,{default:a(()=>[e(S,{span:6},{default:a(()=>[e(C,{style:{width:"280px"},"plex-thumb":t.value.thumb,type:"music"},null,8,["plex-thumb"])]),_:1}),e(S,{span:18},{default:a(()=>[p("p",null,V(t.value.area),1),p("p",null,V(t.value.summary),1),p("p",null,[e(m,{type:"plex",id:t.value.id,class:"mr-3"},null,8,["id"]),e(m,{type:"musicbrainz",id:t.value.musicbrainzId,class:"mr-3"},null,8,["id"]),e(m,{type:"netease",id:t.value.neteaseId,class:"mr-3"},null,8,["id"])])]),_:1})]),_:1})]),p("section",null,[e(c,{title:"专辑"}),p("div",ce,[(w(!0),P(L,null,K(d.value,f=>(w(),z(j,{key:f.id,class:"col-span-3 k-card",bordered:!1},{cover:a(()=>[e(C,{class:"h-cover cursor-pointer",type:"music",preview:!1,"plex-thumb":f.thumb,onClick:ie=>M(f.id)},null,8,["plex-thumb","onClick"]),p("div",re,[e(m,{type:"plex",id:f.id,width:20,class:"mr-1"},null,8,["id"]),e(m,{type:"netease",id:f.neteaseId,width:20},null,8,["id"])])]),default:a(()=>[e(O,{title:f.title,description:f.year},null,8,["title","description"])]),_:2},1024))),128))])])]),e(le,{ref_key:"refArtistSearchNetease",ref:y,onMatchSuccess:u},null,512)],64)}}};export{_e as default};
