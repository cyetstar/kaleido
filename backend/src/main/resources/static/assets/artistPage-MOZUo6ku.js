import{a as E}from"./musicArtistApi-OTdSNFol.js";import{u as T,v as B,a as p,y as z,Z as A,$ as C,b as l,o as c,c as d,e as n,f as u,w as v,t as R,k as G,a3 as H,F as M,n as P,l as D}from"./index-8V0LDlr9.js";const F={class:"k-page-section"},L={class:"k-search-form"},V={class:"flex justify-between items-center"},j={class:"flex justify-end items-center mt-4 mb-2"},I={key:0},$={key:1,class:"grid grid-cols-24 gap-6"},K={__name:"artistPage",setup(q){const h=T(),g=B(),o=p(),i=p({}),m=p(!1),e=p({records:[],pageNumber:0,pageSize:100});z(()=>{_()}),A(()=>{o.value.scrollTop=g.getScrollTop("artist")}),C((a,t,r)=>{g.setScrollTop(o.value.scrollTop,"artist"),r()});const _=()=>{m.value=!0;const a={pageNumber:e.value.pageNumber+1,pageSize:e.value.pageSize,searchCount:!0,...i.value};E(a).then(t=>{m.value=!1,e.value.records.push(...t.records),e.value.pageNumber=t.pageNumber,e.value.pageSize=t.pageSize,e.value.total=t.total})},f=()=>{e.value.pageNumber=0,e.value.records=[],_()},S=a=>{h.push({path:"/music/musicArtist/view",query:{id:a}})},k=()=>{const a=o.value.clientHeight,t=o.value.scrollHeight,r=o.value.scrollTop;a+r>=t-50&&m.value!==!0&&_()};return(a,t)=>{const r=l("h-input"),y=l("a-form"),b=l("a-empty"),x=l("k-plex-image"),N=l("a-card-meta"),w=l("a-card");return c(),d("section",F,[n("div",L,[n("div",V,[u(y,{model:i.value},{default:v(()=>[u(r,{value:i.value.keyword,"onUpdate:value":t[0]||(t[0]=s=>i.value.keyword=s),placeholder:"关键字",search:"",enterButton:"",onSearch:f},null,8,["value"])]),_:1},8,["model"])]),n("div",j,[n("div",null,"总记录数: "+R(e.value.total),1)])]),n("section",{ref_key:"refScrollGrid",ref:o,onScroll:k},[e.value.records.length===0?(c(),d("div",I,[u(b,{image:G(H).PRESENTED_IMAGE_SIMPLE},null,8,["image"])])):(c(),d("div",$,[(c(!0),d(M,null,P(e.value.records,s=>(c(),D(w,{key:s.id,class:"k-card col-span-3",bordered:!1},{cover:v(()=>[u(x,{class:"h-cover cursor-pointer",type:"music",preview:!1,"plex-thumb":s.thumb,onClick:U=>S(s.id)},null,8,["plex-thumb","onClick"])]),default:v(()=>[u(N,{title:s.title},null,8,["title"])]),_:2},1024))),128))]))],544)])}}};export{K as default};
