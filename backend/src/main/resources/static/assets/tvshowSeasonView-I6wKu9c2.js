import{J as H,G as K,u as Q,a as k,x as E,a2 as d,y as W,b as i,o as s,c as a,e as o,f as n,w as c,a4 as X,k as _,g as p,l as f,z as r,t as l,F as u,n as v,aa as Y}from"./index-8V0LDlr9.js";import{e as Z}from"./tvshowSeasonApi-yL39YQBd.js";import{_ as ee,a as te}from"./tvshowShowSearchInfo-YTwu-1r9.js";import{_ as se}from"./tvshowSeasonForm-DaiJihnc.js";import"./tvshowShowApi--6lP2oKh.js";import"./actorForm-JIEKGh_E.js";import"./MinusOutlined-ga10JiA-.js";const ae=C=>H.get({url:"/tvshowEpisode/page",params:C}),oe={class:"k-view-section"},ne={class:"flex"},le={class:"flex-1 ml-8"},re={key:0},ue={class:"flex items-center"},ce={key:0,class:"mr-2"},ie={key:0},_e={key:1,class:"flex"},de=o("span",{class:"mr-2"},"导演:",-1),pe={class:"flex-1"},ve={key:0,class:"px-2"},he=["onClick"],me={key:2,class:"flex"},fe=o("span",{class:"mr-2"},"编剧:",-1),ke={class:"flex-1"},ye={key:0,class:"px-2"},ge=["onClick"],we={key:3,class:"flex"},xe=o("span",{class:"mr-2"},"又名:",-1),be={class:"flex-1"},Le={key:0,class:"px-2"},Se={key:4,class:"flex"},Ce=o("span",{class:"mr-2"},"制片方:",-1),Te={class:"flex-1"},Ie={class:"flex"},Fe=o("span",{class:"mr-2"},"更新于:",-1),Ve={class:"flex-1"},$e={key:0},Be={class:"grid grid-cols-24 gap-6"},Ae={key:1},Me={class:"flex-1 ml-6"},Re={__name:"tvshowSeasonView",setup(C){const T=K();Q();const e=k({}),b=k([]),I=k(),F=k(),V=k(),y=T.query.id,$=k({seasonId:y,force:!0});T.query.title;const B=E(()=>e.value.rating/2),N=E(()=>d(e.value.actorList)&&e.value.actorList.length>8?e.value.actorList.slice(0,8):e.value.actorList),U=async()=>{Z({id:y}).then(h=>{e.value=h}),ae({pageSize:1e3,seasonId:y,orderBy:"ASC:episode_index"}).then(({records:h})=>{b.value=h})},q=()=>{I.value.show(e.value)},z=()=>{F.value.update(y)},D=()=>{V.value.show(y)};return W(()=>{U()}),(h,w)=>{const A=i("k-action-button"),L=i("h-button"),P=i("a-space"),R=i("a-page-header"),S=i("k-thumb-image"),j=i("a-rate"),g=i("a-tag"),x=i("k-logo-link"),M=i("h-module-title"),G=i("a-card-meta"),J=i("a-card");return s(),a(u,null,[o("section",oe,[n(R,{title:e.value.title,onBack:w[0]||(w[0]=()=>h.$router.go(-1))},{backIcon:c(()=>[n(_(X))]),extra:c(()=>[n(P,null,{default:c(()=>[n(A,{action:"tvshowSync","ok-text":"同步Plex","cancel-text":"取消同步",form:$.value},null,8,["form"]),n(A,{action:"tvshowMatchInfo","ok-text":"自动抓取","cancel-text":"取消抓取",form:$.value},null,8,["form"]),n(L,{onClick:q},{default:c(()=>[p("匹配抓取")]),_:1}),n(L,{onClick:z},{default:c(()=>[p("编辑")]),_:1}),n(L,{onClick:D},{default:c(()=>[p("文件管理")]),_:1})]),_:1})]),_:1},8,["title"]),o("section",ne,[o("div",null,[e.value.id?(s(),f(S,{key:0,class:"h-poster",type:"TvshowSeason",style:{width:"250px"},id:e.value.id},null,8,["id"])):r("",!0)]),o("div",le,[o("p",null,[p(l(e.value.originalTitle)+" ",1),_(d)(e.value.year)?(s(),a("span",re,"("+l(e.value.year)+")",1)):r("",!0)]),o("p",ue,[_(d)(e.value.rating)?(s(),a("span",ce,l(e.value.rating)+" 分",1)):r("",!0),n(j,{value:B.value,"onUpdate:value":w[1]||(w[1]=t=>B.value=t),disabled:"","allow-half":""},null,8,["value"])]),o("p",null,[e.value.contentRating?(s(),f(g,{key:0},{default:c(()=>[p(l(e.value.contentRating),1)]),_:1})):r("",!0),(s(!0),a(u,null,v(e.value.countryList,t=>(s(),f(g,{key:t},{default:c(()=>[p(l(t),1)]),_:2},1024))),128)),(s(!0),a(u,null,v(e.value.genreList,t=>(s(),f(g,{key:t},{default:c(()=>[p(l(t),1)]),_:2},1024))),128)),(s(!0),a(u,null,v(e.value.languageList,t=>(s(),f(g,{key:t},{default:c(()=>[p(l(t),1)]),_:2},1024))),128)),(s(!0),a(u,null,v(e.value.tagList,t=>(s(),f(g,{key:t},{default:c(()=>[p(l(t),1)]),_:2},1024))),128))]),_(d)(e.value.summaryList)?(s(),a("p",ie,[(s(!0),a(u,null,v(e.value.summaryList,(t,m)=>(s(),a("p",{key:m},l(t),1))),128))])):r("",!0),_(d)(e.value.directorList)?(s(),a("p",_e,[de,o("span",pe,[(s(!0),a(u,null,v(e.value.directorList,(t,m)=>(s(),a(u,null,[m!==0?(s(),a("span",ve,"/")):r("",!0),o("a",{onClick:O=>h.onViewArtist(t)},l(t.name),9,he)],64))),256))])])):r("",!0),_(d)(e.value.writerList)?(s(),a("p",me,[fe,o("span",ke,[(s(!0),a(u,null,v(e.value.writerList,(t,m)=>(s(),a(u,null,[m!==0?(s(),a("span",ye,"/")):r("",!0),o("a",{onClick:O=>h.onViewArtist(t)},l(t.name),9,ge)],64))),256))])])):r("",!0),_(d)(e.value.akaList)?(s(),a("p",we,[xe,o("span",be,[(s(!0),a(u,null,v(e.value.akaList,(t,m)=>(s(),a(u,null,[m!==0?(s(),a("span",Le,"/")):r("",!0),p(" "+l(t),1)],64))),256))])])):r("",!0),_(d)(e.value.studio)?(s(),a("p",Se,[Ce,o("span",Te,l(e.value.studio),1)])):r("",!0),o("p",Ie,[Fe,o("span",Ve,l(_(Y)(e.value.updatedAt)),1)]),o("p",null,[n(x,{type:"plex",id:e.value.id,class:"mr-3"},null,8,["id"]),n(x,{type:"imdb",id:e.value.imdbId,class:"mr-3"},null,8,["id"]),n(x,{type:"tmdbtv",id:e.value.tmdbId,class:"mr-3"},null,8,["id"]),n(x,{type:"douban",id:e.value.doubanId,class:"mr-3"},null,8,["id"])])])]),_(d)(e.value.actorList)?(s(),a("section",$e,[n(M,{title:"主演"}),o("div",Be,[(s(!0),a(u,null,v(N.value,t=>(s(),f(J,{key:t.id,class:"k-card col-span-3",bordered:!1},{cover:c(()=>[n(S,{class:"h-thumb",preview:!1,url:t.thumb,onClick:m=>h.onViewArtist(t)},null,8,["url","onClick"])]),default:c(()=>[n(G,{title:t.name,description:t.playRole},null,8,["title","description"])]),_:2},1024))),128))])])):r("",!0),_(d)(b.value)?(s(),a("section",Ae,[n(M,{title:"单集"}),(s(!0),a(u,null,v(b.value,t=>(s(),a("div",{class:"flex mb-6",key:t.id},[o("div",null,[n(S,{style:{"object-fit":"cover","aspect-ratio":"16 / 9",width:"200px"},type:"TvshowEpisode",id:t.id},null,8,["id"])]),o("div",Me,[o("p",null,"第 "+l(t.episodeIndex)+" 集 "+l(t.title),1),o("p",null,l(t.summary),1)])]))),128))])):r("",!0)]),n(ee,{ref_key:"refTvshowShowSearchInfo",ref:I},null,512),n(te,{ref_key:"refTvshowSeasonFileManage",ref:V},null,512),n(se,{ref_key:"refTvshowSeasonForm",ref:F},null,512)],64)}}};export{Re as default};
