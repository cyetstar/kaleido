import{a as d,b as p,o as m,l as v,w as t,k as l,f as e,N as F,P as U,d as L,u as E,L as O,c as j,g as D,O as b,_ as G}from"./index-8V0LDlr9.js";import{s as H,a as J,b as M,c as Q,d as W,e as X}from"./sysDictTypeApi-jTA_ZecI.js";const Y={__name:"sysDictTypeForm",emits:["save-complete"],setup(K,{expose:A,emit:n}){const k=n;let y=d("create"),s=d(),o=d({id:"",name:"",type:""});const z=()=>{y.value="create",s.value.reset(),s.value.show()},T=async _=>{y.value="update",s.value.reset(),o.value=await H(_),s.value.show()},P=async()=>{try{y.value==="create"?await J(o.value)&&(U.success("操作成功"),k("save-complete"),s.value.hide()):y.value==="update"&&await M(o.value)&&(U.success("操作成功"),k("save-complete"),s.value.hide())}catch{}};return A({create:z,update:T}),(_,u)=>{const R=p("h-input"),f=p("h-col"),C=p("h-form-modal");return m(),v(C,{ref_key:"formRef",ref:s,"label-col":{span:6},form:l(o),"onUpdate:form":u[2]||(u[2]=r=>F(o)?o.value=r:o=r),title:l(y)==="create"?"新增字典":"编辑字典",onSubmit:P},{default:t(()=>[e(f,{span:24},{default:t(()=>[e(R,{required:"",label:"字典名称",name:"name",value:l(o).name,"onUpdate:value":u[0]||(u[0]=r=>l(o).name=r)},null,8,["value"])]),_:1}),e(f,{span:24},{default:t(()=>[e(R,{required:"",label:"字典类型",name:"type",value:l(o).type,"onUpdate:value":u[1]||(u[1]=r=>l(o).type=r)},null,8,["value"])]),_:1})]),_:1},8,["form","title"])}}},Z=Y,I={class:"h-page-section"},ee=L({__name:"sysDictTypePage",setup(K){const A=E();let n=d({name:"",type:""});const k=(a,i)=>{i(Q({...a,...n.value})),f.value=[]},y=a=>{f.value=a},s=d(),o=()=>{s.value.load(1)},z=()=>{s.value.load(1)},T=d();d({visible:!1,type:"0",form:{}});const P=()=>{T.value.create()},_=async a=>{T.value.update(a)},u=()=>{s.value.load(1)},R=a=>{A.push({path:"/sysadmin/sysDictType/view",query:{id:a}})};let f=d([]);const C=async a=>{W(typeof a=="string"?[a]:a).then(w=>{w&&(s.value.load(),U.success("删除成功！"))})},r=()=>{X().then(a=>{a&&U.success("重载成功！")})};return(a,i)=>{const w=p("h-input"),S=p("a-col"),N=p("h-form-search"),g=p("h-button"),V=p("h-button-delete"),q=p("a-space"),x=p("a-table-column"),$=p("h-table-data"),h=O("permissKey");return m(),j("section",I,[e(N,{form:l(n),"onUpdate:form":i[2]||(i[2]=c=>F(n)?n.value=c:n=c),onSearch:o,onReset:z,class:"h-form"},{default:t(()=>[e(S,{span:5},{default:t(()=>[e(w,{value:l(n).name,"onUpdate:value":i[0]||(i[0]=c=>l(n).name=c),label:"字典名称",name:"name"},null,8,["value"])]),_:1}),e(S,{span:5},{default:t(()=>[e(w,{value:l(n).type,"onUpdate:value":i[1]||(i[1]=c=>l(n).type=c),label:"字典类型",name:"type"},null,8,["value"])]),_:1})]),_:1},8,["form"]),e(q,{class:"h-btn-space"},{default:t(()=>[b((m(),v(g,{type:"primary",onClick:r},{default:t(()=>[D("重载字典")]),_:1})),[[h,"sysDictType:other"]]),b((m(),v(g,{type:"primary",onClick:P},{default:t(()=>[D("新增")]),_:1})),[[h,"sysDictType:create"]]),b((m(),v(V,{plain:"",disabled:l(f).length===0,onDelete:i[3]||(i[3]=c=>C(l(f)))},{default:t(()=>[D("删除")]),_:1},8,["disabled"])),[[h,"sysDictType:delete"]])]),_:1}),e($,{ref_key:"tableRef",ref:s,"row-key":"id",onLoadData:k,onSelectionChange:y},{default:t(()=>[e(x,{title:"字典名称","data-index":"name"}),e(x,{title:"字典类型","data-index":"type"}),e(x,{title:"创建时间","data-index":"createTime"}),e(x,{title:"操作",key:"action"},{default:t(({record:c})=>[e(q,{size:0},{default:t(()=>[b((m(),v(g,{type:"primary",size:"small",link:"",onClick:B=>R(c.id)},{default:t(()=>[D("详情 ")]),_:2},1032,["onClick"])),[[h,"sysDictType:view"]]),b((m(),v(g,{type:"primary",size:"small",link:"",onClick:B=>_(c.id)},{default:t(()=>[D("编辑 ")]),_:2},1032,["onClick"])),[[h,"sysDictType:update"]]),b((m(),v(V,{size:"small",link:"",onDelete:B=>C(c.id)},{default:t(()=>[D("删除 ")]),_:2},1032,["onDelete"])),[[h,"sysDictType:delete"]])]),_:2},1024)]),_:1})]),_:1},512),e(Z,{ref_key:"formRef",ref:T,onSaveComplete:u},null,512)])}}}),se=G(ee,[["__scopeId","data-v-f26978f1"]]);export{se as default};
